(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{1113:function(t,e,n){"use strict";n.r(e);var o=n(2),r=(n(12),n(19)),c=n(1),l=n(660),d={props:{blok:{type:Object}},data:()=>({content:[],observer:null,minHeight:"60vh",timewatch:{timer:null,timeout:null},includeLoaded:!1,disableLazyLoading:!1}),created(){var t;if(null!==(t=this.blok.template.content)&&void 0!==t&&t.body){var e,n=JSON.stringify(null===(e=this.blok.template.content)||void 0===e?void 0:e.body);this.disableLazyLoading=n.includes('"component":"Plans"')||n.includes('"component":"OrderMenu"')}("1"===Object(c.e)(this.$route,"query.dpop","")||this.disableLazyLoading)&&(this.minHeight="0",this.loadContent())},computed:{contentLoaded(){return this.blok.template&&!Object(r.isEmpty)(this.blok.template.content)},wrapperClasses(){return[this.blok.classes]}},methods:{onWaypoint(t){var e=this;return Object(o.a)((function*(){t===e.$waypointMap.GOING_IN&&(yield e.loadContent(),e.minHeight="0")}))()},loadContent(){var t=this;return Object(o.a)((function*(){var{name:e,template:template,force_load:n}=t.blok,{content:content,group_id:o}=template,d="";if(void 0!==content){var{body:body}=content;d=body}if(t.contentLoaded&&!Object(r.isEmpty)(d))t.content=d;else{if(!1===n){var h=template&&o?o:template;return void console.warn("Include not Loaded ->",e,h)}var y=Object(c.e)(t.$store,"state.storyblok.lang","en"),f=y?"&starts_with=".concat(y,"/*"):"",v=Object(c.e)(t.$store,"state.storyblok.settings.variables",[]),m={};v.length>0&&v.forEach((element=>{Object(l.c)(element).then((t=>{m["{{"+element.name+"}}"]=t}))}));var{query:O}=t.$nuxt.context,w=O._storyblok?"draft":"published",{data:data}=yield t.$storyapi.get("cdn/stories?by_uuids=".concat(template).concat(f),{version:w}),j=Object(c.e)(data,"stories",[]),k=Object(c.e)(data,"stories[0].content",{});if(j.length&&!Object(r.isEmpty)(k)){var _=Object(l.b)(JSON.stringify(k),m),L=JSON.parse(_),{body:$={}}=L;t.content=$,t.includeLoaded=!0}}}))()}}},h=n(4),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.disableLazyLoading?n("span",t._b({directives:[{name:"editable",rawName:"v-editable",value:t.blok,expression:"blok"}]},"span",{class:t.wrapperClasses,style:{"min-height":t.minHeight}},!1),t._l(t.content,(function(t){return n(t.component,{key:t._uid,tag:"component",attrs:{blok:t}})})),1):n("LoadOnView",t._b({directives:[{name:"editable",rawName:"v-editable",value:t.blok,expression:"blok"}],attrs:{onScroll:t.onWaypoint,disableAfterView:!1}},"LoadOnView",{class:t.wrapperClasses,style:{"min-height":t.minHeight}},!1),t._l(t.content,(function(t){return n(t.component,{key:t._uid,tag:"component",attrs:{blok:t}})})),1)}),[],!1,null,null,null);e.default=component.exports},660:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return O}));var o=n(2),r=(n(20),n(64),n(26)),c=n.n(r);n(191);var l=n(1);function d(object,t,e,n,o){if(e=e||"",n=n||[],-1===(o=o||[]).indexOf(object)||object!==Object(object)){o.push(object),t(object)&&n.push({path:e,value:object});try{if(object===Object(object))for(var r in object)0!==r.indexOf("$")&&d(object[r],t,e+"."+r,n,o)}catch(t){throw t}return n}}function h(t,e,n,o,r,c,l){return y.apply(this,arguments)}function y(){return(y=Object(o.a)((function*(data,t,e,n,o,r,c){var l=data.story,h=d(l,(t=>t&&"Include"==t.component)).map((t=>t.value.template));if(0===h.length)return l;for(var y=Math.ceil(h.length/30),f=1;f<=y;){var v={by_uuids:h.slice(30*(f-1),30*f).join(","),version:t,per_page:30,page:1};e&&(v.starts_with="".concat(n,"*"));try{(yield o.$storyapi.get("cdn/stories",v)).data.stories.forEach((t=>{d(l,(e=>{e&&e.template===t.uuid&&(t.includedStory=!0,e.template=t)}))}))}catch(t){return!1}f++}return l}))).apply(this,arguments)}function f(t,e){return Object.keys(e).reduce(((t,n)=>t.replace(new RegExp(n,"g"),e[n])),t)}function v(t){return m.apply(this,arguments)}function m(){return(m=Object(o.a)((function*(t){if("static"===t.type)return new Promise((e=>{e(t.value)}));if("api"===t.type){if(t.resolve)return t.resolve;var e=yield c.a.get(t.value);return t.resolve=e.data,t.resolve}}))).apply(this,arguments)}function O(t){var e={};return Object(l.e)(t,"data.story.content.variables",[]).forEach((element=>{v(element).then((data=>{e["{{"+element.name+"}}"]=data}))})),e}}}]);