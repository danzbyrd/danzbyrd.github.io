function keywordKeyUp(e){var t,a,o,r=e.attr("id"),n="",s="",i=$("#narrowSearchMegaMenu").attr("data-url");"cmpnameMegaMenu"===r?n="cmpnamemegamenu":"indunameMegaMenu"===r&&(n="subp=&indunamemegamenu",s="Ind"),a=$("#resultsWrapperRefineMegaMenu"+s),o=$("#resultsHolderRefineMegaMenu"+s),t="&"+n+"="+encodeURIComponent(e.val()),e.val().length>2?(a.css("top","Ind"===s?"6.6em":0).show(),o.html("Searching..."),$.ajax({type:"POST",url:i+t+"&username=admin&page=public",data:$("#searchcomp").serialize(),dataType:"html",success:function(e){e=e.replace(/\/companies\/index\?pc=(\w{2})&cmpy=(\d+)\">(.*?)</gm,customReplace),o.html(e)},error:function(e){console&&console.error&&console.error(e)}})):a.hide()}function onBlur(e){e.value||(e.value=e.defaultValue)}function onFocus(e){e.value===e.defaultValue&&(e.value="")}function customReplace(e,t,a,o){var r=o;return"/company-profile/"+t+"/"+(o=(o=o.replace(/\s+/g,"_")).replace(/_\(.*?\)$/,""))+"_en_"+a+'.html">'+r+"<"}function loadInsights(){$.getJSON("//ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?",{num:4,q:FEED_URL}).done((function(e){rssObject=e.responseData.feed.entries;for(var t="",a=0;a<rssObject.length;a+=1)el=rssObject[a],t+='<div class="clearfix"><div class="f-l">'+el.content+"</div>",t+='<div class="f-r"><span class="ins-country">'+el.categories[0]+"</span>",t+='<a class="ins-title" href="'+EmiscomHost+el.link+'">'+el.title+"</a>",t+='<span class="ins-date">'+$.datepicker.formatDate("MM dd, yy",new Date(el.publishedDate))+"</span>",t+='<span class="ins-source">Source: <span class="fw-b">'+el.author+"</span></span></div></div>";$("#insights").html(t)}))}$(document).ready((function(){"undefined"!=typeof SELECTED_PC&&($(".product-select option[value="+SELECTED_PC+"]").attr("selected","selected"),$("#product option[value="+SELECTED_PC+"]").attr("selected","selected")),$("#product, .product-select").change((function(){var e=$(this).attr("data-store-url")?$(this).attr("data-store-url")+"/":WEB_ROOT_DIR+"company-profile/";""===this.value?$(location).attr("href",e):$(location).attr("href",e+this.value+"/page1.html")})),$(".industry-select").change((function(){var e=$(this).attr("data-store-url")?$(this).attr("data-store-url")+"/":WEB_ROOT_DIR+"company-profile/";""===this.value?$(location).attr("href",e):$(location).attr("href",e+this.value+"/page1.html")})),$(document).on("click",".inactive",(function(e){e.preventDefault()})),$(document).on("click",".back-to-the-ptofile",(function(e){$(".back-to-the-ptofile").hide(),$("#cybersource_iframe").attr("src","about:blank"),$("#cybersource_iframe").closest(".content-iframe").hide(),$(".content-main").show(),$("#similar-companies").show(),$(".similar-companies-anchor").show(),$(".purchase-button-bottom").show(),$(".report-pages-preview").show()}));var e;$(document).on("click",".purchase-now",(function(e,t){e.preventDefault();var a="company";$(this).attr("data-type")&&(a=$(this).attr("data-type"));var o,r,n,s,i,d,c,p="";"company"===a?p="company profile":"industry"===a?p="insight report":"mareports"===a?p="M&A report":"madeals"===a&&(p="M&A deals"),window.dataLayer=window.dataLayer||[],dataLayer.push({event:"visitor interaction",interaction_name:"add to cart",buy_btn_position:void 0!==t&&t.buttonPossition?t.buttonPossition:this.dataset.buttonPossition,ecommerce:{add:{products:[{name:this.dataset.cmpyName,id:this.dataset.cmpy,price:this.dataset.price,brand:p,category:this.dataset.cmpyProd+"/"+this.dataset.mainIndul3,variant:this.dataset.langl3,quantity:1}]}}}),"company"===a?function(e){var t=e.attr("data-cmpy"),a=e.attr("data-cmpy-prod"),o=e.attr("data-lang"),r=e.attr("data-cons"),n=e.attr("data-referer"),s=e.attr("data-payment-processor"),i=e.attr("data-csfr-token"),d=[];$("[name='rbpoints[]']:enabled").each((function(){d.push($(this).val())}));var c=$("#js-purchase-form");c.length>0&&c.remove();var p={cmpy:t,pc:a,lang:o,cons:r,rbpoints:d,payment_processor:s,referer:n,csfr_token:i};openLoadingDialog("Loading... Please wait!"),$.ajax({type:"post",url:WEB_ROOT_DIR+"company-profile/index/purchase",data:p,success:function(e){e?e.url?$('<form id="js-purchase-form" action="'+e.url+'" method="get"></form>').appendTo("body").submit():e.error&&($("<div></div>").append(e.error).appendTo(document.body).dialog({width:600,modal:!0,resizable:!1,title:"EMIS Store",close:function(){$(this).remove()}}),closeLoadingDialog()):closeLoadingDialog()},error:function(){closeLoadingDialog()}})}($(this)):"industry"===a||"mareports"===a?(o=$(this),r=o.attr("data-dcid"),n=o.attr("data-prod"),s=o.attr("data-lang"),i=o.attr("data-referer"),d={dcid:r,prod:n,lang:s,payment_processor:o.attr("data-payment-processor"),referer:i,csfr_token:o.attr("data-csfr-token")},(c=$("#js-purchase-indu-form")).length>0&&c.remove(),openLoadingDialog("Loading... Please wait!"),$.ajax({type:"post",url:WEB_ROOT_DIR+"store/reports/purchase",data:d,success:function(e){if(e)if(e.url){var t,a=$('<form id="js-purchase-indu-form" action="'+e.url+'" method="post"></form>');for(t in e){var o=$('<input type="text" name="" value=""/>').attr("name",t).val(e[t]);a.append(o)}a.appendTo("body").submit()}else e.error&&($("<div></div>").append(e.error).appendTo(document.body).dialog({width:600,modal:!0,resizable:!1,title:"EMIS Store",close:function(){$(this).remove()}}),closeLoadingDialog());else closeLoadingDialog()},error:function(){closeLoadingDialog()}})):"madeals"===a&&function(e){var t=e.attr("data-prod"),a=e.attr("data-lang"),o=e.attr("data-referer"),r={prod:t,lang:a,payment_processor:e.attr("data-payment-processor"),referer:o,search_id:e.attr("data-search-id"),csfr_token:e.attr("data-csfr-token")},n=$("#js-purchase-ma-form");n.length>0&&n.remove(),openLoadingDialog("Loading... Please wait!"),$.ajax({type:"post",url:WEB_ROOT_DIR+"store/deals/purchase",data:r,success:function(e){if(e)if(e.url){var t,a=$('<form id="js-purchase-ma-form" action="'+e.url+'" method="post"></form>');for(t in e){var o=$('<input type="text" name="" value=""/>').attr("name",t).val(e[t]);a.append(o)}a.appendTo("body").submit().remove()}else e.error&&($("<div></div>").append(e.error).appendTo(document.body).dialog({width:600,modal:!0,resizable:!1,title:"EMIS Store",close:function(){$(this).remove()}}),closeLoadingDialog());else closeLoadingDialog()},error:function(){closeLoadingDialog()}})}($(this))})),$(document).on("click",".download-purchased-report",(function(e){e.preventDefault();var t=$(this).closest(".download-report").attr("data-uid"),a=$(this).closest(".download-report").attr("data-prod"),o=$(this).closest(".download-report").attr("data-type"),r=$(this).closest(".download-report").attr("data-app-url"),n=$('<input type="text" name="uid" value=""/>').val(t),s=$('<input type="text" name="pc" value=""/>').val(a),i=r+WEB_ROOT_DIR+"company-profile/index/download-purchased-report";"industry"===o||"mareports"===o?i=r+WEB_ROOT_DIR+"store/reports/download-purchased-report":"madeals"===o&&(i=r+WEB_ROOT_DIR+"store/deals/download-purchased-deals"),$('<form action="'+i+'" method="get"></form>').append(n).append(s).appendTo("body").submit().remove()})),$(document).on("click",".regenerate-purchased-report",(function(e){e.preventDefault();var t=$(this).closest(".download-report").attr("data-uid"),a=$(this).closest(".download-report").attr("data-prod"),o=($(this).closest(".download-report").attr("data-type"),$(this).closest(".download-report").attr("data-app-url"));$.ajax({type:"get",url:o+WEB_ROOT_DIR+"company-profile/"+a+"/regenerate-purchased-report/"+t,success:function(){var e=$('.download-report[data-uid="'+t+'"]');e.find(".download-purchased-report").closest("span").hide(),e.find(".generating-purchased-report-span").show(),checkBasketStatus(!0)}})})),checkPurchasedReport=function t(a){var o=$(".download-report").attr("data-uid"),r=$(".download-report").attr("data-prod");if(!o||!r)return!1;a?e=setInterval((function(){t()}),1e4):$.ajax({type:"get",url:WEB_ROOT_DIR+"company-profile/"+r+"/check-purchased-report/"+o,success:function(t){if(t){var a=!1;if(t.errorMessage&&($(".check-payment").hide(),$(".check-generation").hide(),$(".payment-error-message").html(t.errorMessage),$(".payment-error-message").show(),a=!0),"paid"===t.purchaseStatus&&$(".check-payment").hide(),"generated"===t.status&&$(".check-generation").hide(),"paid"===t.purchaseStatus){var o=!1;("industry"===t.type||"mareports"===t.type||"generated"===t.status)&&(o=!0),o&&($(".download-report").show(),a=!0)}a&&clearInterval(e)}}})},$((function(){$("#check-purchased-report").val()&&checkPurchasedReport(!0),$("#check-basket-status").val()&&checkBasketStatus(!0);var e=null;$("#cmpnameMegaMenu, #indunameMegaMenu").keyup((function(){var t=$(this);clearTimeout(e),e=setTimeout((function(){keywordKeyUp(t)}),500)})),$("html").click((function(){$("#resultsWrapperRefineMegaMenu").hide(),$("#resultsWrapperRefineMegaMenuInd").hide()})),$("#narrowSearchMegaMenu1").on("click",(function(e){e.preventDefault(),$("#searchcomp").length&&$("#searchcomp").submit()}))})),$(document).on("click",".request-demo-button",(function(e){var t=this.dataset.buttonPossition;window.dataLayer=window.dataLayer||[],dataLayer.push({event:"visitor interaction",interaction_name:"request demo",button_position:t})})),$(document).on("click",".social-media-button",(function(e){var t=this.dataset.buttonPossition,a=this.dataset.linkDestination;window.dataLayer=window.dataLayer||[],dataLayer.push({event:"visitor interaction",interaction_name:"social link click",link_destination:a,button_position:t})})),$(document).on("click",".download-sample-button",(function(e){var t=this.dataset.buttonPossition,a=this.dataset.reportType;window.dataLayer=window.dataLayer||[],dataLayer.push({event:"visitor interaction",interaction_name:"view sample report",button_position:t,report_type:a})})),$(document).on("click",".div-order-sum-sh",(function(e){"show"===$(".order-title:visible").attr("data-action")?($('.order-title[data-action="hide"]').show(),$(".div-order-sum").show(),$('.order-title[data-action="show"]').hide()):($('.order-title[data-action="hide"]').hide(),$(".div-order-sum").hide(),$('.order-title[data-action="show"]').show())}))}));